# 更新日志

所有此项目的版本变更都将记录在此文件中。

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。

## [2.3.0] - 2025-07-21

### Changed
- **重构视频下载逻辑**: 引入了先进的“主/备 (Primary/Fallback)”策略，优先尝试高效的一体化下载，失败后自动切换到分步下载与合并，显著提高下载成功率。
- **重构音频下载逻辑**: 采用双策略方法，根据请求类型智能选择：
    - 对格式转换请求（如 MP3），使用与视频下载一致的“主动指定”策略。
    - 对直接下载原始流的请求，使用更可靠的“主动搜索”策略。

### Added
- **实现“主动验证”策略**: 对于视频下载和音频格式转换，程序现在会预先构建确切的输出路径并进行验证，取代了旧的搜索方式，判断更快速、更可靠。
- **实现“主动搜索”策略**: 对于直接下载的音频流，程序现在会根据已知的文件名前缀进行精确搜索，避免了在整个目录中盲目查找的问题。

### Improved
- **提升健壮性**: 新的下载策略能更好地应对各种下载场景和潜在的失败情况。
- **代码清晰度**: `Downloader` 模块的职责更加明确，作为总指挥，编排 `CommandBuilder`、`SubprocessManager` 等核心模块，提升了代码的可维护性。
